<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Adaptive Learning System - Dashboard</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="app-container">
        <!-- 사이드바 -->
        <nav class="sidebar">
            <div class="logo">
                <span class="logo-icon">🧠</span>
                <span class="logo-text">Adaptive Learn</span>
            </div>
            <ul class="nav-menu">
                <li class="nav-item active">
                    <a href="/">
                        <span class="nav-icon">📊</span>
                        <span>대시보드</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="/review">
                        <span class="nav-icon">📝</span>
                        <span>복습</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="/knowledge">
                        <span class="nav-icon">💡</span>
                        <span>지식 추가</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="/library">
                        <span class="nav-icon">📚</span>
                        <span>라이브러리</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="/schedule">
                        <span class="nav-icon">📅</span>
                        <span>스케줄</span>
                    </a>
                </li>
            </ul>
        </nav>

        <!-- 메인 콘텐츠 -->
        <main class="main-content">
            <!-- 헤더 -->
            <header class="header">
                <div class="header-left">
                    <h1>대시보드</h1>
                    <p class="date-display" id="currentDate"></p>
                </div>
                <div class="header-right">
                    <div class="streak-badge" id="streakBadge">
                        <span class="streak-icon">🔥</span>
                        <span class="streak-count" id="streakCount">0</span>
                        <span class="streak-text">일 연속</span>
                    </div>
                </div>
            </header>

            <!-- 통계 카드들 -->
            <section class="stats-grid">
                <div class="stat-card level-card">
                    <div class="stat-icon">⭐</div>
                    <div class="stat-content">
                        <div class="stat-label">레벨</div>
                        <div class="stat-value" id="userLevel">1</div>
                        <div class="xp-bar">
                            <div class="xp-progress" id="xpProgress"></div>
                        </div>
                        <div class="xp-text">
                            <span id="currentXP">0</span> / <span id="nextLevelXP">100</span> XP
                        </div>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon">📚</div>
                    <div class="stat-content">
                        <div class="stat-label">오늘 복습</div>
                        <div class="stat-value" id="todayCards">0</div>
                        <div class="stat-sub">카드</div>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon">✨</div>
                    <div class="stat-content">
                        <div class="stat-label">오늘 XP</div>
                        <div class="stat-value" id="todayXP">0</div>
                        <div class="stat-sub">포인트</div>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon">🎯</div>
                    <div class="stat-content">
                        <div class="stat-label">복습 대기</div>
                        <div class="stat-value" id="dueCards">0</div>
                        <div class="stat-sub">카드</div>
                    </div>
                </div>
            </section>

            <!-- 메인 그리드 -->
            <div class="dashboard-grid">
                <!-- 히트맵 캘린더 -->
                <section class="card heatmap-card">
                    <div class="card-header">
                        <h2>📅 학습 히트맵</h2>
                        <div class="heatmap-legend">
                            <span>적음</span>
                            <div class="legend-colors">
                                <div class="legend-color level-0"></div>
                                <div class="legend-color level-1"></div>
                                <div class="legend-color level-2"></div>
                                <div class="legend-color level-3"></div>
                                <div class="legend-color level-4"></div>
                            </div>
                            <span>많음</span>
                        </div>
                    </div>
                    <div class="heatmap-container" id="heatmapContainer">
                        <div class="heatmap-months" id="heatmapMonths"></div>
                        <div class="heatmap-wrapper">
                            <div class="heatmap-days">
                                <span>월</span>
                                <span>수</span>
                                <span>금</span>
                            </div>
                            <div class="heatmap-grid" id="heatmapGrid"></div>
                        </div>
                    </div>
                    <div class="heatmap-stats">
                        <div class="heatmap-stat">
                            <span class="stat-num" id="totalDays">0</span>
                            <span class="stat-label">활동 일수</span>
                        </div>
                        <div class="heatmap-stat">
                            <span class="stat-num" id="longestStreak">0</span>
                            <span class="stat-label">최장 스트릭</span>
                        </div>
                        <div class="heatmap-stat">
                            <span class="stat-num" id="totalCards">0</span>
                            <span class="stat-label">총 복습</span>
                        </div>
                    </div>
                </section>

                <!-- 일일 퀘스트 -->
                <section class="card quests-card">
                    <div class="card-header">
                        <h2>🎯 일일 퀘스트</h2>
                    </div>
                    <div class="quests-list" id="questsList">
                        <!-- 동적으로 채워짐 -->
                    </div>
                </section>

                <!-- 동기 부여 메시지 -->
                <section class="card motivation-card">
                    <div class="motivation-content">
                        <div class="motivation-icon">💪</div>
                        <p class="motivation-text" id="motivationText">
                            오늘도 한 걸음 더! 작은 진전이 큰 변화를 만듭니다.
                        </p>
                    </div>
                </section>

                <!-- 빠른 액션 -->
                <section class="card actions-card">
                    <div class="card-header">
                        <h2>⚡ 빠른 시작</h2>
                    </div>
                    <div class="actions-grid">
                        <a href="/review" class="action-btn primary">
                            <span class="action-icon">📝</span>
                            <span class="action-text">복습 시작</span>
                            <span class="action-badge" id="reviewBadge">0</span>
                        </a>
                        <a href="/knowledge" class="action-btn secondary">
                            <span class="action-icon">💡</span>
                            <span class="action-text">지식 추가</span>
                        </a>
                        <button class="action-btn tertiary" id="pomodoroBtn">
                            <span class="action-icon">🍅</span>
                            <span class="action-text">포모도로</span>
                        </button>
                    </div>
                </section>

                <!-- 뱃지 -->
                <section class="card badges-card">
                    <div class="card-header">
                        <h2>🏅 획득한 뱃지</h2>
                    </div>
                    <div class="badges-grid" id="badgesGrid">
                        <!-- 동적으로 채워짐 -->
                    </div>
                </section>

                <!-- 주간 차트 -->
                <section class="card chart-card">
                    <div class="card-header">
                        <h2>📈 주간 학습</h2>
                    </div>
                    <div class="chart-container">
                        <canvas id="weeklyChart"></canvas>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <!-- 포모도로 모달 -->
    <div class="modal" id="pomodoroModal">
        <div class="modal-content pomodoro-modal">
            <div class="pomodoro-header">
                <h2>🍅 포모도로 타이머</h2>
                <button class="close-btn" id="closePomodoroBtn">&times;</button>
            </div>
            <div class="pomodoro-timer">
                <div class="timer-display" id="timerDisplay">25:00</div>
                <div class="timer-label" id="timerLabel">집중 시간</div>
            </div>
            <div class="pomodoro-controls">
                <button class="timer-btn start" id="startTimerBtn">시작</button>
                <button class="timer-btn pause" id="pauseTimerBtn" style="display:none;">일시정지</button>
                <button class="timer-btn reset" id="resetTimerBtn">리셋</button>
            </div>
            <div class="pomodoro-sessions">
                <span id="sessionCount">0</span> / 4 세션
            </div>
        </div>
    </div>

    <!-- 툴팁 -->
    <div class="tooltip" id="heatmapTooltip"></div>

    <!-- 복습 기록 모달 -->
    <div class="modal" id="reviewHistoryModal">
        <div class="modal-content review-history-modal">
            <div class="modal-header">
                <div class="modal-title-section">
                    <h2>📅 복습 기록</h2>
                    <span class="modal-date" id="reviewHistoryDate"></span>
                </div>
                <button class="close-btn" onclick="closeReviewHistoryModal()">&times;</button>
            </div>
            <div class="modal-summary" id="reviewHistoryCount">총 0개의 복습</div>
            <div class="review-history-list" id="reviewHistoryList">
                <!-- 동적으로 채워짐 -->
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="/static/js/dashboard.js"></script>
</body>
</html>
